<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>ゲヤマクラブ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <?!= include('css'); ?>
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
</head>
<body>
  <div id="app" style="display:none;">
    <div class="container">
      <h1>ゲヤマクラブ</h1>
      <div id="userInfo" class="small muted"></div>
      
      <div class="tabs">
        <div class="tab active" onclick="switchTab('home')">練習申込</div>
        <div class="tab" onclick="switchTab('admin')" id="adminTabBtn" style="display:none;">管理</div>
      </div>

      <div id="tab-home" class="tab-content">
        <div class="card">
          <h2>次回の練習</h2>
          <div id="eventInfo">読み込み中...</div>
          
          <hr>
          
          <form id="regForm">
            <div class="status-box" id="regStatus">未登録</div>
            
            <label>
              <input type="checkbox" id="friendToggle" onchange="toggleGuests()"> 友達を連れていく
            </label>
            
            <div id="guestSection" style="display:none; margin-top:10px; padding:10px; background:#f9f9f9; border-radius:8px;">
              <label>人数: <input type="number" id="guestCount" min="0" max="5" value="0" onchange="renderGuestInputs()"></label>
              <div id="guestInputs"></div>
            </div>
            
            <div style="margin-top:20px;">
              <p id="feeTotal" class="highlight-text">支払予定額: - 円</p>
              <button type="button" class="btn-primary" onclick="submitRegistration()">参加登録する</button>
              <button type="button" class="btn-danger" onclick="cancelRegistration()">キャンセル</button>
            </div>
          </form>
        </div>
      </div>

      <div id="tab-admin" class="tab-content" style="display:none;">
        <div class="card">
          <h3>試合運営</h3>
          <label>コート数: <select id="adminCourts"><option value="2">2</option><option value="3" selected>3</option></select></label>
          <button class="btn-primary" onclick="runLottery()">抽選実行</button>
          <div id="lotteryResult"></div>
        </div>
      </div>

    </div>
  </div>
  <?!= include('js'); ?>
</body>
</html>